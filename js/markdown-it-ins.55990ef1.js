var m=function(c){function u(n,r){var o,i,s,t,e,k=n.pos,l=n.src.charCodeAt(k);if(r||l!==43||(i=n.scanDelims(n.pos,!0),t=i.length,e=String.fromCharCode(l),t<2))return!1;for(t%2&&(s=n.push("text","",0),s.content=e,t--),o=0;o<t;o+=2)s=n.push("text","",0),s.content=e+e,!(!i.can_open&&!i.can_close)&&n.delimiters.push({marker:l,length:0,jump:o/2,token:n.tokens.length-1,end:-1,open:i.can_open,close:i.can_close});return n.pos+=i.length,!0}function p(n,r){var o,i,s,t,e,k=[],l=r.length;for(o=0;o<l;o++)s=r[o],s.marker===43&&s.end!==-1&&(t=r[s.end],e=n.tokens[s.token],e.type="ins_open",e.tag="ins",e.nesting=1,e.markup="++",e.content="",e=n.tokens[t.token],e.type="ins_close",e.tag="ins",e.nesting=-1,e.markup="++",e.content="",n.tokens[t.token-1].type==="text"&&n.tokens[t.token-1].content==="+"&&k.push(t.token-1));for(;k.length;){for(o=k.pop(),i=o+1;i<n.tokens.length&&n.tokens[i].type==="ins_close";)i++;i--,o!==i&&(e=n.tokens[i],n.tokens[i]=n.tokens[o],n.tokens[o]=e)}}c.inline.ruler.before("emphasis","ins",u),c.inline.ruler2.before("emphasis","ins",function(n){var r,o=n.tokens_meta,i=(n.tokens_meta||[]).length;for(p(n,n.delimiters),r=0;r<i;r++)o[r]&&o[r].delimiters&&p(n,o[r].delimiters)})};export{m};
